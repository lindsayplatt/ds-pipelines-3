# Do not edit - automatically generated
# from the task_makefile.mustache template
# by create_task_makefile() via do_state_tasks()
# using scipiper package version 0.0.20

target_default: 123_state_tasks

include:
  - remake.yml

packages:
  - tidyverse
  - dataRetrieval
  - lubridate

sources:
  - 1_fetch/src/get_site_data.R
  - 2_process/src/tally_site_obs.R
  - 3_visualize/src/plot_site_data.R
  - 123_state_tasks.R

file_extensions:
  - "ind"

targets:
  123_state_tasks:
    depends:
      - obs_tallies_promise

  # --- WI --- #
  
  WI_data:
    command: get_site_data(state_info_file='1_fetch/tmp/inventory_WI.tsv', parameter=parameter)

  3_visualize/out/timeseries_WI.png:
    command: plot_site_data(target_name, WI_data, parameter)

  WI_tally:
    command: tally_site_obs(WI_data)

  # --- MN --- #
  
  MN_data:
    command: get_site_data(state_info_file='1_fetch/tmp/inventory_MN.tsv', parameter=parameter)

  3_visualize/out/timeseries_MN.png:
    command: plot_site_data(target_name, MN_data, parameter)

  MN_tally:
    command: tally_site_obs(MN_data)

  # --- MI --- #
  
  MI_data:
    command: get_site_data(state_info_file='1_fetch/tmp/inventory_MI.tsv', parameter=parameter)

  3_visualize/out/timeseries_MI.png:
    command: plot_site_data(target_name, MI_data, parameter)

  MI_tally:
    command: tally_site_obs(MI_data)

  # --- IL --- #
  
  IL_data:
    command: get_site_data(state_info_file='1_fetch/tmp/inventory_IL.tsv', parameter=parameter)

  3_visualize/out/timeseries_IL.png:
    command: plot_site_data(target_name, IL_data, parameter)

  IL_tally:
    command: tally_site_obs(IL_data)

  # --- IN --- #
  
  IN_data:
    command: get_site_data(state_info_file='1_fetch/tmp/inventory_IN.tsv', parameter=parameter)

  3_visualize/out/timeseries_IN.png:
    command: plot_site_data(target_name, IN_data, parameter)

  IN_tally:
    command: tally_site_obs(IN_data)

  # --- IA --- #
  
  IA_data:
    command: get_site_data(state_info_file='1_fetch/tmp/inventory_IA.tsv', parameter=parameter)

  3_visualize/out/timeseries_IA.png:
    command: plot_site_data(target_name, IA_data, parameter)

  IA_tally:
    command: tally_site_obs(IA_data)

  # --- Overall job --- #

  obs_tallies_promise:
    command: combine_obs_tallies(
      `WI_tally`,
      `MN_tally`,
      `MI_tally`,
      `IL_tally`,
      `IN_tally`,
      `IA_tally`)
    
